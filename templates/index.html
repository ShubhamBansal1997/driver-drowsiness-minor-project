<!DOCTYPE html>
<html>
	<head>
		<title>Real Time Application for Drowsiness Detection</title>
	</head>
	<body>
		<div id="section1" class="section">
			<h1 class='app'>Real Time Application For Drowsiness Detection</h1>
			<br/>
			<div class='container'>
				<div class='row'>
					<div class='col-md-12'>
						<img src={{ url_for('video_feed') }} />
					</div>
				</div>
			</div>
		</div>
		<div id="section2" class="section">
			<div class='container'>
				<div class='col-md-12 sec'>
					<h2>Technology Used</h2>
					<p>The main reason for motor vehicular accidents is the driver drowsiness. This work shows a surveillance system developed to detect and alert the vehicle driver about the presence of drowsiness. It uses a smartphone like small computer with a mobile application using Android operating system to implement the Human Computer Interaction System. For the detection of drowsiness, the most relevant visual indicators that reflect the driver’s condition are the behavior of the eyes, the lateral and frontal assent of the head and the yawn. </p>
					<p>The system works adequately under natural lighting conditions and no matter the use of driver accessories like glasses, hearing aids or a cap. Due to a large number of traffic accidents when driver has fallen asleep this proposal was developed in order to prevent them by providing a non-invasive system, easy to use and without the necessity of purchasing specialized devices. The method gets 90% of drowsiness detection.</p>
				</div>
			</div>
		</div>
		<div id="section3" class="section">
			<div class='container'>
				<div class='col-md-12 sec'>
					<h2>Features</h2>
					<p>This system is drowsiness detection system for automobile. Driver drowsiness will be determined from several symptoms that manifest in drowsy driver’s face. Through analysis of the eye states, the system will be able to tell a drowsy driver from a normal driver.</p>
					<p> A video stream will be continuously obtained from the driver’s faces and feed into a microcontroller for processing. Classifiers will then be used to classify the state of the driver’s eye. If a drowsy driver is detected an alarm will be raised, until the system notices the driver is alert.</p>
					<p> Development of the system was through agile methodology where the scrum and the extreme programming method were combined. The system was broken into small modules, these modules were developed independently and tested integration was done. During unit, testing refactoring was adopted in order to optimize the units for their intended purpose.</p>
				</div>
			</div>
		</div>
<script>
function readTextFile(file)
{
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, false);
    rawFile.onreadystatechange = function ()
    {
        if(rawFile.readyState === 4)
        {
            if(rawFile.status === 200 || rawFile.status == 0)
            {
            		console.log(rawFile)
                var allText = rawFile.response;
                console.log(allText)
                return allText;
            }
        }
    }
    rawFile.send(null);
};
readTextFile('/static/alarm.txt');
</script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.1.2/howler.core.min.js"></script>
		<script>
		    var sound = new Howl({
		      src: ['/static/alarm.WAV']
		    });
		    setInterval(function() {
		    	var test = readTextFile('/static/alarm.txt')
		    	//console.log(test)
		    	if (readTextFile('/static/alarm.txt')==='ALARM')
		    		//console.log("hello")
		    		//console.log(readTextFile('/static/alarm.txt'))
		    		sound.play();
		    	}, 1000);
		</script>
	</body>
</html>
